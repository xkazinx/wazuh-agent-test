name: WorkflowC

on:
  pull_request:
    types:
      - opened
      - synchronize
      - reopened

jobs:
  await_workflow:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
      - name: Example
        uses: convictional/trigger-workflow-and-wait@v1.6.5
        with:
          owner: xkazinx
          repo: wazuh-agent-test
          workflow_file_name: test.yml
          github_token: ${{ secrets.GITHUB_TOKEN }}

    #steps:
    #- name: Dispatch an action and get the run ID
    #  uses: codex-/return-dispatch@v1
    #  id: return_dispatch
    #  with:
    #    token: ${{ secrets.GITHUB_TOKEN }}
    #    repo: wazuh-agent-test
    #    owner: xkazinx
    #    workflow: test.yml
    #    ref: more_tests_6
    #- name: Await Run ID ${{ steps.return_dispatch.outputs.run_id }}
    #  uses: Codex-/await-remote-run@v1.0.0
    #  with:
    #    token: ${{ secrets.GITHUB_TOKEN }}
    #    repo: wazuh-agent-test
    #    owner: xkazinx
    #    run_id: ${{ steps.return_dispatch.outputs.run_id }}
    #    ref: more_tests_6
      - name: Check Remote Workflow Status
        if: ${{ steps.await.outputs.conclusion == 'success' }}
        run: echo "Success!!!"
      - name: Check Remote Workflow Status
        if: ${{ steps.await.outputs.conclusion != 'success' }}
        run: echo "Failure!!!"

